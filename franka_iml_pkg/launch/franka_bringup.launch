<launch>

    <arg name="robot_ip" default="172.16.0.2"/>
    
    <arg name="load_gripper" default="true" />
    <arg name="load_camera" default="true" />

    <param name="robot_description" command="$(find xacro)/xacro --inorder $(find franka_description)/robots/panda_arm.urdf.xacro hand:=$(arg load_gripper)" />

    <include file="$(find franka_control)/launch/franka_control.launch" >
        <arg name="robot_ip" value="$(arg robot_ip)" />
        <arg name="load_gripper" value="$(arg load_gripper)" />
    </include>

    

    <include file="$(find panda_moveit_config)/launch/move_group.launch">
        <arg name="fake_execution" value="false"/>
        <arg name="load_gripper" value="$(arg load_gripper)" />
    </include>

    <include file="$(find panda_moveit_config)/launch/moveit_rviz.launch">
    </include>

  <group if="$(arg load_camera)" >
    <include file="$(find realsense2_camera)/launch/includes/nodelet.launch.xml">
      <arg name="serial_no"         value=""/>
      <arg name="json_file_path"    value=""/>
      <arg name="depth_width"       value="640"/>
      <arg name="depth_height"      value="480"/>
      <arg name="depth_fps"         value="30"/>
      <arg name="color_width"       value="640"/>
      <arg name="color_height"      value="480"/>
      <arg name="color_fps"         value="30"/>
      <arg name="enable_depth"      value="true"/>
      <arg name="enable_color"      value="true"/>
      <arg name="enable_infra1"     value="false"/>
      <arg name="enable_infra2"     value="false"/>
      <arg name="enable_fisheye"    value="false"/>
      <arg name="enable_gyro"       value="false"/>
      <arg name="enable_accel"      value="false"/>
      <arg name="enable_pointcloud" value="true"/>
      <arg name="enable_sync"       value="true"/>
      <arg name="tf_prefix"         value="_camera"/>
    </include>
  </group>
  
</launch>